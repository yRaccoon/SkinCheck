<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analysis Results - Skin Health Check</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg" style="background-color: #4CAF93; color: white;">
        <div class="container">
            <a class="navbar-brand" href="{{ url_for('index') }}" style="color: white !important;">SkinCheck</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="{{ url_for('index') }}"
                            style="color: white !important;">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('camera') }}" style="color: white !important;">Camera</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{{ url_for('upload') }}" style="color: white !important;">Upload</a>
                    </li>
                </ul>
                <div class="d-flex">
                    <button id="themeToggle" class="btn btn-outline-light">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mt-5">
        <div class="row g-4">
            <!-- Image Column -->
            <div class="col-md-6">
                <div class="card shadow-sm h-100">
                    <div class="card-header bg-light">
                        <h5 class="mb-0"><i class="fas fa-image me-2"></i>Analysis Preview</h5>
                    </div>
                    <div class="card-body p-3">
                        <canvas id="resultCanvas" class="img-fluid rounded"></canvas>
                    </div>
                </div>
            </div>

            <!-- Results Column -->
            <div class="col-md-6">
                <div class="card shadow-sm h-100">
                    <div class="card-header bg-light">
                        <h5 class="mb-0"><i class="fas fa-clipboard-list me-2"></i>Detailed Analysis</h5>
                    </div>
                    <div class="card-body p-4">
                        {% if results %}
                        {% for condition in results %}
                        <div class="analysis-result mb-4 p-3 rounded">
                            {% if condition.label == 'acne' %}
                            <div class="text-center py-4">
                                <div class="mb-3">
                                    <i class="fas fa-exclamation-triangle fa-3x text-danger"></i>
                                </div>
                                <h5 class="text-danger mb-3">Acne Detected</h5>
                                <div class="alert alert-danger bg-opacity-10">
                                    <p class="mb-2"><strong>Skin Status:</strong> Acne {{ condition.confidence }}
                                    </p>
                                    <hr class="my-2">
                                    <p class="mb-1"><strong>Recommendations:</strong></p>
                                    <ul class="list-unstyled small">
                                        <li class="d-flex align-items-start mb-3 p-2 bg-light rounded">
                                            <i class="fas fa-tint text-info mt-1 me-3"></i>
                                            <div>
                                                <strong class="d-block text-start">Avoid contact</strong>
                                                <small class="text-muted">Minimize touching affected areas to
                                                    prevent irritation</small>
                                            </div>
                                        </li>
                                        <li class="d-flex align-items-start mb-3 p-2 bg-light rounded">
                                            <i class="fas fa-pump-soap text-warning mt-1 me-3"></i>
                                            <div>
                                                <strong class="d-block text-start">Use non-comedogenic</strong>
                                                <small class="text-muted">Choose oil-free, non-pore-clogging
                                                    products</small>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <hr class="my-3">
                                <p class="small mb-0 text-muted">
                                    <i class="fas fa-info-circle me-1"></i>
                                    Moderate cases may require professional treatment
                                </p>
                            </div>

                            {% elif condition.label == 'eczema' %}
                            <div class="text-center py-4">
                                <div class="mb-3">
                                    <i class="fas fa-exclamation-triangle fa-3x text-danger"></i>
                                </div>
                                <h5 class="text-danger mb-3">Eczema</h5>
                                <div class="alert alert-danger bg-opacity-10">
                                    <p class="mb-2"><strong>Skin Status: Eczema {{ condition.confidence }}</strong>
                                    </p>
                                    <hr class="my-2">
                                    <p class="mb-1"><strong>Recommendations:</strong></p>
                                    <ul class="list-unstyled small">
                                        <li class="d-flex align-items-start mb-3 p-2 bg-light rounded">
                                            <i class="fas fa-tint text-info mt-1 me-3"></i>
                                            <div>
                                                <strong class="d-block text-start">Frequent moisturizing</strong>
                                                <small class="text-muted">Apply fragrance-free creams 2-3 times
                                                    daily</small>
                                            </div>
                                        </li>
                                        <li class="d-flex align-items-start mb-3 p-2 bg-light rounded">
                                            <i class="fas fa-pump-soap text-warning mt-1 me-3"></i>
                                            <div>
                                                <strong class="d-block text-start">Gentle cleansing</strong>
                                                <small class="text-muted">Avoid SLS and harsh detergents</small>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <hr class="my-3">
                                <p class="small mb-0 text-muted">
                                    <i class="fas fa-info-circle me-1"></i>
                                    Identify and avoid triggers for better management
                                </p>
                            </div>

                            {% elif condition.label == 'warts' %}
                            <div class="text-center py-4">
                                <div class="mb-3">
                                    <i class="fas fa-virus fa-3x text-danger"></i>
                                </div>
                                <h5 class="text-danger mb-3">Warts Detected</h5>
                                <div class="alert alert-danger bg-opacity-10">
                                    <p class="mb-2"><strong>Skin Status:</strong> Warts {{ condition.confidence }}
                                    </p>
                                    <hr class="my-2">
                                    <p class="mb-1"><strong>Recommendations:</strong></p>
                                    <ul class="list-unstyled small">
                                        <li class="d-flex align-items-start mb-3 p-2 bg-light rounded">
                                            <i class="fas fa-people-arrows text-danger mt-1 me-3"></i>
                                            <div>
                                                <strong class="d-block text-start">Prevent spread</strong>
                                                <small class="text-muted">Avoid sharing personal items</small>
                                            </div>
                                        </li>
                                        <li class="d-flex align-items-start mb-3 p-2 bg-light rounded">
                                            <i class="fas fa-hand-paper text-success mt-1 me-3"></i>
                                            <div>
                                                <strong class="d-block text-start">No scratching</strong>
                                                <small class="text-muted">Prevent autoinoculation</small>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                <hr class="my-3">
                                <p class="small mb-0 text-muted">
                                    <i class="fas fa-info-circle me-1"></i>
                                    Most warts resolve within 2 years without treatment
                                </p>
                            </div>
                            {% endif %}

                        </div>
                        {% endfor %}

                        {% else %}
                        <!--  No Conditions Detected Section -->
                        <div class="text-center py-4">
                            <div class="mb-3">
                                <i class="fas fa-camera-retro fa-3x text-secondary"></i>
                            </div>
                            <h4 class="text-secondary mb-3">No Condition Detected</h4>
                            <div class="alert alert-success bg-opacity-10">
                                <p class="mb-2"><strong>Image Guidelines</strong></p>
                                <hr class="my-2">
                                <p class="mb-1 mt-2"><strong>Tips:</strong></p>
                                <ul class="list-unstyled small">
                                    <li class="d-flex align-items-start mb-3 p-2 bg-light rounded">
                                        <i class="fas fa-lightbulb me-2"></i>
                                        <div>
                                            <strong class="d-block text-start">Natural lighting</strong>
                                            <small class="text-muted">Use daylight or soft, even lighting for
                                                accurate colors.</small>
                                        </div>
                                    </li>
                                    <li class="d-flex align-items-start mb-3 p-2 bg-light rounded">
                                        <i class="fas fa-ruler me-2"></i>
                                        <div>
                                            <strong class="d-block text-start">Close-up shot</strong>
                                            <small class="text-muted">Position the camera 6-12 inches from the skin
                                                for clear details.</small>
                                        </div>
                                    </li>
                                    <li class="d-flex align-items-start mb-3 p-2 bg-light rounded">
                                        <i class="fas fa-hand-paper me-2"></i>
                                        <div>
                                            <strong class="d-block text-start">Steady hands</strong>
                                            <small class="text-muted">Use a tripod or rest your arms to avoid blurry
                                                images.</small>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        {% endif %}

                        <div class="text-center mt-4">
                            <a href="{{ url_for('index') }}" class="btn btn-primary w-100">
                                <i class="fas fa-redo me-2"></i>New Analysis
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    </section>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script>
        window.resultImageData = 'data:image/jpeg;base64,{{ image }}';
        window.resultDetectionData = JSON.parse('{{ results|tojson|safe}}');
    </script>
    <!-- JS -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

</body>

</html>